<!DOCTYPE html>
<html>
    <head>
        <title>bim chat app</title>
        <meta charset="UTF-8"/>
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>

        <script src="/socket.io/socket.io.js"></script>

        <link rel="stylesheet" href="styles/styles.css"></style>
        <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
    </head>
    <body>

      <div class="promptContainer">
        <div class="prompt">?</div>
      </div>

      <div class="messagesContainer">
        <!-- <h1>messages</h1> -->
      </div>



      <!-- <form class="textForm" action="" method="get">
        <div class="textarea-container">
          <textarea class="newTA" autofocus name="inMess" placeholder="type something" id="" rows="1"></textarea>
        </div>
        <button type="button" class="sendButton" disabled></button>
      </form>

      <div class="noYesContainer">
        <button class="buttonNo">NO</button>
        <button class="buttonYes">YES</button>
      </div> -->



      <script>

        // inits
        var messages = document.querySelector('.messagesContainer');
        //     inputMessage = document.querySelector('.inputMessage'),
        //     sendButton = document.querySelector('.sendButton');
        //
        var promptContainer = document.querySelector('.promptContainer');
        var prompt = document.querySelector('.prompt');
        // var textForm = document.querySelector('.textForm');
        //
        // var noYesContainer = document.querySelector('.noYesContainer');
        // var noButton = document.querySelector('.buttonNo');
        // var yesButton = document.querySelector('.buttonYes');



        // socket io
        var socket = io.connect(window.location.origin);
        socket.on('connect', function() {
            //  console.log('connected to server socket');
            // TODO initialize old chats
            console.log(socket.id); // custom color messages
         });

        socket.on('post', function (data) {
          post(data);
        });

        socket.on('changeP', function (data) {
          // console.log(data);
          prompt.innerText = data.value + '?';
          // changeInputMode(data);

          // show when prompt changes happened
          let message = document.createElement('div');
          message.className = 'message wordwrap blue';
          message.innerHTML = data.value;
          messages.appendChild(message);
        });


        document.addEventListener('DOMContentLoaded', function() {

          // post message to container
          post = function (data) {
            let message = document.createElement('div');
            message.className = 'message wordwrap';
            message.innerHTML = data;
            messages.appendChild(message);
            // textarea.value = '';
            // textarea.rows = 1;
            //
            // // resets
            // autoSize();
            // checkSendState();
            // textarea.focus();
          }

        });

      </script>
    </body>
</html>
